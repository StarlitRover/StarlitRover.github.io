{"title":"ã€Œ1079ã€Total Sales of Supply Chain","uid":"60bfb2bd1454fe93e59a0b3383c25980","slug":"ã€Œ1079ã€Total-Sales-of-Supply-Chain","date":"2022-10-11T06:10:22.000Z","updated":"2022-10-21T14:56:20.214Z","comments":true,"path":"api/articles/ã€Œ1079ã€Total-Sales-of-Supply-Chain.json","keywords":null,"cover":null,"content":"<p>A supply chain is a network of retailersï¼ˆé›¶å”®å•†ï¼‰, distributorsï¼ˆç»é”€å•†ï¼‰, and suppliersï¼ˆä¾›åº”å•†ï¼‰â€“ everyone involved in moving a product from supplier to customer.</p>\n<p>Starting from one root supplier, everyone on the chain buys products from oneâ€™s supplier in a priceÂ PÂ and sell or distribute them in a price that isÂ r% higher thanÂ P. Only the retailers will face the customers. It is assumed that each member in the supply chain has exactly one supplier except the root supplier, and there is no supply cycle.</p>\n<p>Now given a supply chain, you are supposed to tell the total sales from all the retailers.</p>\n<span id=\"more\"></span>\n\n<h3><span id=\"input-specification\">Input Specification:</span></h3><p>Each input file contains one test case. For each case, the first line contains three positive numbers:Â $NÂ (â‰¤10^5)$, the total number of the members in the supply chain (and hence their IDâ€™s are numbered from 0 toÂ Nâˆ’1, and the root supplierâ€™s ID is 0);Â P, the unit price given by the root supplier; andÂ r, the percentage rate of price increment for each distributor or retailer. ThenÂ NÂ lines follow, each describes a distributor or retailer in the following format:</p>\n<p>$$<br>K_iâ€‹\\ ID[1]\\ ID[2]\\ â€¦\\ ID[K_iâ€‹]<br>$$</p>\n<p>where in theÂ i-th line,Â Kiâ€‹Â is the total number of distributors or retailers who receive products from supplierÂ i, and is then followed by the IDâ€™s of these distributors or retailers.Â $K_j$â€‹Â being 0 means that theÂ j-th member is a retailer, then instead the total amount of the product will be given aftter $K_j$â€‹. All the numbers in a line are separated by a space.</p>\n<h3><span id=\"output-specification\">Output Specification:</span></h3><p>For each test case, print in one line the total sales we can expect from all the retailers, accurate up to 1 decimal place. It is guaranteed that the number will not exceedÂ $10^{10}$.</p>\n<h3><span id=\"sample-input\">Sample Input:</span></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">10 1.80 1.00</span><br><span class=\"line\">3 2 3 5</span><br><span class=\"line\">1 9</span><br><span class=\"line\">1 4</span><br><span class=\"line\">1 7</span><br><span class=\"line\">0 7</span><br><span class=\"line\">2 6 1</span><br><span class=\"line\">1 8</span><br><span class=\"line\">0 9</span><br><span class=\"line\">0 4</span><br><span class=\"line\">0 3</span><br></pre></td></tr></table></figure>\n\n<h3><span id=\"sample-output\">Sample Output:</span></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">42.4</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2><span id=\"Ï‰\">Î©</span></h2><p>$\\qquad$ç»™å‡ºä¸€ä¸ªç»é”€å•†æ ‘ï¼Œæ ¹èŠ‚ç‚¹æ˜¯æœ€å¤§ä¾›åº”å•†ï¼Œå¶å­èŠ‚ç‚¹æ˜¯é›¶å”®å•†ï¼Œå…¶ä½™ä¾›åº”å•†éƒ½ä»çˆ¶ä¾›åº”å•†è¿›è´§ï¼Œç„¶åå–ç»™è‡ªå·±ä¸‹é¢çš„ä¾›åº”å•†ã€‚æ¯ä¸ªä¾›åº”å•†ï¼ˆåŒ…æ‹¬é›¶å”®å•†ï¼‰å‡ºå”®ä»·æ ¼éƒ½ä¼šæ¯”è‡ªå·±ä¹°å…¥çš„ä»·æ ¼é«˜å‡º$r\\%$ï¼Œå‘ŠçŸ¥æ‰€æœ‰é›¶å”®å•†çš„è¿›è´§é‡ï¼Œè®¡ç®—æ‰€æœ‰é›¶å”®å•†çš„é¢„æœŸæ”¶å…¥æ€»å’Œã€‚</p>\n<p>$\\qquad$ä¸éš¾çœ‹å‡ºï¼Œé›¶å”®å•†å‡ºå”®ä»·æ ¼åªä¸è‡ªèº«æ‰€å¤„çš„æ·±åº¦æœ‰å…³ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç”¨BFSï¼Œæ¯æ¬¡éå†ä¸€å±‚èŠ‚ç‚¹ï¼Œå°†è¯¥å±‚ä¸­çš„å¶å­èŠ‚ç‚¹è¿›è´§é‡ç›¸åŠ ï¼Œæœ€å$\\times (1+r\\%)^h$å³ä¸ºè¯¥å±‚é›¶å”®å•†çš„é¢„æœŸæ”¶å…¥ã€‚</p>\n<p>$\\qquad$éå†å®Œæ•´é¢—æ ‘åå†å°†å¾—åˆ°ç»“æœä¹˜ä»¥æœ€å¤§ä¾›åº”å•†çš„å‡ºå”®ä»·æ ¼$p$å³å¯ã€‚</p>\n<p>$\\qquad$æ— æ„ä¸­è¿˜å‘ç°å…¶å®<code>&quot;%.nf&quot;</code>è¿™ç§æµ®ç‚¹æ•°æ ¼å¼åŒ–ä¹Ÿæ˜¯å››èˆäº”å…¥ï¼Œé‡å¡‘ä¸–ç•Œè§‚ã€‚ä¹‹å‰è¿˜æœ‰ä¸€ç¯‡åšå®¢ä¸“é—¨åˆ†æå››èˆäº”å…¥æ—¶è¿˜ä»¥ä¸ºæ˜¯æµ®ç‚¹æ•°è¿ç®—ä¸­çš„ç²¾åº¦æŸå¤±ï¼Œæœªæ›¾æƒ³æ˜¯ç›´æ¥ç»™å››èˆäº”å…¥äº†ï¼Œç©å®Œï¼Œå¾—è¡¥è¯¾å»äº†ã€‚ä¸è¿‡ä»–çš„å››èˆäº”å…¥æœºåˆ¶å› ä¸ºæµ®ç‚¹æ•°ç²¾åº¦çš„é—®é¢˜ä¼šæœ‰ç‚¹å·®å¼‚ï¼Œè¯¦æƒ…å¯è§<a href=\"https://www.zhihu.com/question/364159510\">Cè¯­è¨€printfå‡½æ•°%.2fè¾“å‡ºä¸ºä»€ä¹ˆå››èˆäº”å…¥å®ç°æœºåˆ¶ä¸åŒï¼Ÿ</a>ã€‚</p>\n<p>$\\qquad$âš ï¸+0.5æ“ä½œæ˜¯æµ®ç‚¹æ•°è½¬intæ—¶çš„æ“ä½œï¼Œä¸Šé¢çš„æ ¼å¼åŒ–é»˜è®¤æ˜¯å››èˆäº”å…¥ã€‚</p>\n<hr>\n<h2><span id>ğŸ</span></h2><figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;vector&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;cmath&gt;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"type\">int</span> n, m;</span><br><span class=\"line\">    <span class=\"type\">double</span> p, r;</span><br><span class=\"line\">    cin &gt;&gt; n &gt;&gt; p &gt;&gt; r;</span><br><span class=\"line\">    r = <span class=\"number\">1</span> + r / <span class=\"number\">100</span>;</span><br><span class=\"line\">    vector&lt;vector&lt;<span class=\"type\">int</span>&gt;&gt; <span class=\"built_in\">sup</span>(n);</span><br><span class=\"line\">    <span class=\"function\">vector&lt;<span class=\"type\">int</span>&gt; <span class=\"title\">ret</span><span class=\"params\">(n, <span class=\"number\">0</span>)</span></span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"type\">int</span> i = <span class=\"number\">0</span>; i &lt; n; ++i)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        cin &gt;&gt; m;</span><br><span class=\"line\">        sup[i].<span class=\"built_in\">resize</span>(m);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"type\">int</span> j = <span class=\"number\">0</span>; j &lt; m; ++j)</span><br><span class=\"line\">            cin &gt;&gt; sup[i][j];</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (m == <span class=\"number\">0</span>) cin &gt;&gt; ret[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    vector&lt;<span class=\"type\">int</span>&gt; crt&#123;<span class=\"number\">0</span>&#125;, tmp;</span><br><span class=\"line\">    <span class=\"type\">double</span> total = <span class=\"number\">0</span>, rate = <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (!crt.<span class=\"built_in\">empty</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"type\">int</span> num = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">auto</span> &amp;k: crt)</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (ret[k])</span><br><span class=\"line\">                num += ret[k];</span><br><span class=\"line\">            <span class=\"keyword\">else</span></span><br><span class=\"line\">                tmp.<span class=\"built_in\">insert</span>(tmp.<span class=\"built_in\">end</span>(), sup[k].<span class=\"built_in\">begin</span>(), sup[k].<span class=\"built_in\">end</span>());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        total += rate * num;</span><br><span class=\"line\">        rate *= r;</span><br><span class=\"line\">        crt = std::<span class=\"built_in\">move</span>(tmp);</span><br><span class=\"line\">        tmp = <span class=\"built_in\">vector</span>&lt;<span class=\"type\">int</span>&gt;();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    total *= p;</span><br><span class=\"line\">    <span class=\"built_in\">printf</span>(<span class=\"string\">&quot;%.1f&quot;</span>, total);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","text":"A supply chain is a network of retailersï¼ˆé›¶å”®å•†ï¼‰, distributorsï¼ˆç»é”€å•†ï¼‰, and suppliersï¼ˆä¾›åº”å•†ï¼‰â€“ everyone involved in moving a product from supplier to...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"PATï¼ˆAdvanced Levelï¼‰Practice","slug":"PATï¼ˆAdvanced-Levelï¼‰Practice","count":153,"path":"api/categories/PATï¼ˆAdvanced-Levelï¼‰Practice.json"}],"tags":[{"name":"Cï¼‹ï¼‹","slug":"Cï¼‹ï¼‹","count":160,"path":"api/tags/Cï¼‹ï¼‹.json"},{"name":"BFS","slug":"BFS","count":10,"path":"api/tags/BFS.json"},{"name":"Tree","slug":"Tree","count":23,"path":"api/tags/Tree.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">Input Specification:</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">Output Specification:</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">Sample Input:</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\"><span class=\"toc-text\">Sample Output:</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\"><span class=\"toc-text\">Î©</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\"><span class=\"toc-text\">ğŸ</span></a>","author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}},"mapped":true,"prev_post":{"title":"ã€Œ1080ã€Graduate Admission","uid":"d79e1a49ba7f6556c0817ac0afa7d9ae","slug":"ã€Œ1080ã€Graduate-Admission","date":"2022-10-11T12:44:56.000Z","updated":"2022-10-11T13:07:57.373Z","comments":true,"path":"api/articles/ã€Œ1080ã€Graduate-Admission.json","keywords":null,"cover":null,"text":"It is said that in 2011, there are about 100 graduate schools ready to proceed over 40,000 applications in Zhejiang Province. It would help ...","link":"","photos":[],"count_time":{"symbolsCount":"5.2k","symbolsTime":"5 mins."},"categories":[{"name":"PATï¼ˆAdvanced Levelï¼‰Practice","slug":"PATï¼ˆAdvanced-Levelï¼‰Practice","count":153,"path":"api/categories/PATï¼ˆAdvanced-Levelï¼‰Practice.json"}],"tags":[{"name":"Cï¼‹ï¼‹","slug":"Cï¼‹ï¼‹","count":160,"path":"api/tags/Cï¼‹ï¼‹.json"},{"name":"sort","slug":"sort","count":24,"path":"api/tags/sort.json"},{"name":"set","slug":"set","count":16,"path":"api/tags/set.json"},{"name":"tuple","slug":"tuple","count":9,"path":"api/tags/tuple.json"}],"author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}}},"next_post":{"title":"ã€Œ1078ã€Hashing","uid":"c2d476bf277e1b89715673299c98c76c","slug":"ã€Œ1078ã€Hashing","date":"2022-10-08T10:51:59.000Z","updated":"2022-10-17T04:09:10.412Z","comments":true,"path":"api/articles/ã€Œ1078ã€Hashing.json","keywords":null,"cover":null,"text":"The task of this problem is simple: insert a sequence of distinct positive integers into a hash table, and output the positions of the input...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"PATï¼ˆAdvanced Levelï¼‰Practice","slug":"PATï¼ˆAdvanced-Levelï¼‰Practice","count":153,"path":"api/categories/PATï¼ˆAdvanced-Levelï¼‰Practice.json"}],"tags":[{"name":"Cï¼‹ï¼‹","slug":"Cï¼‹ï¼‹","count":160,"path":"api/tags/Cï¼‹ï¼‹.json"},{"name":"hash","slug":"hash","count":2,"path":"api/tags/hash.json"}],"author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}}}}