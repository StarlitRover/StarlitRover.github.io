{"title":"OpenGL落脚CLion","uid":"481cf8b49191f67983b97c3d9fc63cfa","slug":"OpenGL落脚CLion","date":"2022-03-03T11:45:51.000Z","updated":"2022-03-19T02:30:12.010Z","comments":true,"path":"api/articles/OpenGL落脚CLion.json","keywords":null,"cover":[],"content":"<p>$\\qquad$本篇文章将阐述在<strong>Mac os Monterey(12.2.1)<strong>的</strong>CLion(2021.3.3)<strong>上配置</strong>OpenGL</strong>的整体过程。虽然网上已有相关的文章，但有很多操作存在问题，可能是Mac系统变迁的原因，故作此文。</p>\n<p>$\\qquad$原参考文章：<a href=\"https://zhuanlan.zhihu.com/p/263665409\">Mac Clion OpenGL开发环境配置</a></p>\n<span id=\"more\"></span>\n\n<hr>\n<ol>\n<li><p>打开 terminal，用<strong>homebrew</strong>（默认已有）安装依赖项</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install glew</span><br><span class=\"line\">brew install glfw3</span><br></pre></td></tr></table></figure>\n\n<p>可以通过下述命令来查看上述两个依赖项的安装位置</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew list glew</span><br><span class=\"line\">brew list glfw</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>配置Glad，通道<a href=\"http://glad.dav1d.de/\">在此</a></p>\n<p>①</p>\n<img src=\"/images/计算机图形学/1/1.png\" style=\"zoom:40%;\">\n\n<p>②</p>\n<img src=\"/images/计算机图形学/1/2.png\" style=\"zoom:40%;\">\n\n<p>③将glad.zip进行解压后里面就是上图中的include和src，将include&#x2F;glad文件夹下的glad.h中的<code>#include &lt;KHR/khrplatform.h&gt;</code>更改为<code>#include &lt;khrplatform.h&gt;</code></p>\n<img src=\"/images/计算机图形学/1/4.png\" style=\"zoom:80%;\">\n\n<p>④将include里面的两个文件夹glad与KHR拖入 <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include</code>（这与参考文章里的地址不同，那篇文章中的文件夹是真的没找到在哪），而src文件夹则直接拖入CLion中的项目文件夹（这个项目配置与普通C++项目配置相同）</p>\n<img src=\"/images/计算机图形学/1/3.png\" style=\"zoom:50%;\">\n</li>\n<li><p>接下来配置CLion项目文件中的CMakeLists.txt文件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cmake_minimum_required(VERSION 3.21)</span><br><span class=\"line\">project(OpenGLab)</span><br><span class=\"line\"></span><br><span class=\"line\">set(CMAKE_CXX_STANDARD 23)</span><br><span class=\"line\"></span><br><span class=\"line\">###############上面部分不用改，按自己原来的即可###############</span><br><span class=\"line\">#设置一些OpenGL头文件所在目录的宏</span><br><span class=\"line\">set(GLEW_H /opt/homebrew/Cellar/glew/2.2.0_1/include/GL)</span><br><span class=\"line\">set(GLFW_H /opt/homebrew/Cellar/glfw/3.3.6/include/GLFW)</span><br><span class=\"line\">#设置OpenGL库所在位置，并链接</span><br><span class=\"line\">set(GLEW_LINK /opt/homebrew/Cellar/glew/2.2.0_1/lib/libGLEW.2.2.0.dylib)</span><br><span class=\"line\">set(GLFW_LINK /opt/homebrew/Cellar/glfw/3.3.6/lib/libglfw.3.3.dylib)</span><br><span class=\"line\">link_libraries($&#123;OPENGL&#125; $&#123;GLEW_LINK&#125; $&#123;GLFW_LINK&#125;)</span><br><span class=\"line\">#########################################################</span><br><span class=\"line\"></span><br><span class=\"line\">set(GLAD_H /usr/local/include/)</span><br><span class=\"line\">set(GLAD_H /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/glad)</span><br><span class=\"line\">set(KH_H /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/KHR)</span><br><span class=\"line\">#包含上述头文件所在目录</span><br><span class=\"line\">include_directories($&#123;GLEW_H&#125; $&#123;GLFW_H&#125; $&#123;GLAD_H&#125; $&#123;KH_H&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">#设置要编译的c/cpp文件到可执行文件中，该exe包含两个文件glad.c,main.cpp,生成OpenGLab</span><br><span class=\"line\">set(SOURCE_FILES &quot;src/glad.c&quot; &quot;main.cpp&quot;)</span><br><span class=\"line\">add_executable(OpenGLab $&#123;SOURCE_FILES&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\"># mac下这步很重要</span><br><span class=\"line\">if (APPLE)</span><br><span class=\"line\">    target_link_libraries(OpenGLab &quot;-framework OpenGL&quot;)</span><br><span class=\"line\">    target_link_libraries(OpenGLab &quot;-framework GLUT&quot;)</span><br><span class=\"line\">endif()</span><br></pre></td></tr></table></figure>\n\n<p>⚠️将代码中我的项目名称OpenGLab换成你自己的项目名，另外#之间代码中的路径可能需要修改，请参考第一步中<code>brew list</code>的结果（主要是版本号可能不同的问题，我这里<strong>glew</strong>是<strong>2.2.0_1</strong>，<strong>glfw</strong>是<strong>3.3.6</strong>）</p>\n<img src=\"/images/计算机图形学/1/6.png\" style=\"zoom:50%;\">\n</li>\n<li><p>测试代码——from 参考文章</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;glew.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;glfw3.h&gt;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"keyword\">include</span> <span class=\"string\">&lt;iostream&gt;</span></span></span><br><span class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> std;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">key_callback</span><span class=\"params\">(GLFWwindow* window, <span class=\"type\">int</span> key, <span class=\"type\">int</span> scancode, <span class=\"type\">int</span> action, <span class=\"type\">int</span> mode)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果按下ESC，把windowShouldClose设置为True，外面的循环会关闭应用</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(key==GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)</span><br><span class=\"line\">        <span class=\"built_in\">glfwSetWindowShouldClose</span>(window, GL_TRUE);</span><br><span class=\"line\">    std::cout&lt;&lt;<span class=\"string\">&quot;ESC&quot;</span>&lt;&lt;mode;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"type\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//初始化GLFW库</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"built_in\">glfwInit</span>())</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"number\">-1</span>;</span><br><span class=\"line\">    <span class=\"comment\">//创建窗口以及上下文</span></span><br><span class=\"line\">    GLFWwindow* window = <span class=\"built_in\">glfwCreateWindow</span>(<span class=\"number\">640</span>, <span class=\"number\">480</span>, <span class=\"string\">&quot;hello world&quot;</span>, <span class=\"literal\">NULL</span>, <span class=\"literal\">NULL</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!window)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">//创建失败会返回NULL</span></span><br><span class=\"line\">        <span class=\"built_in\">glfwTerminate</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//建立当前窗口的上下文</span></span><br><span class=\"line\">    <span class=\"built_in\">glfwMakeContextCurrent</span>(window);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"built_in\">glfwSetKeyCallback</span>(window, key_callback); <span class=\"comment\">//注册回调函数</span></span><br><span class=\"line\">    <span class=\"comment\">//循环，直到用户关闭窗口</span></span><br><span class=\"line\">    <span class=\"keyword\">while</span>(!<span class=\"built_in\">glfwWindowShouldClose</span>(window))</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"comment\">/*******轮询事件*******/</span></span><br><span class=\"line\">        <span class=\"built_in\">glfwPollEvents</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*******渲染*******/</span></span><br><span class=\"line\">        <span class=\"comment\">//选择清空的颜色RGBA</span></span><br><span class=\"line\">        <span class=\"built_in\">glClearColor</span>(<span class=\"number\">0.2</span>, <span class=\"number\">0.3</span>, <span class=\"number\">0.3</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">        <span class=\"built_in\">glClear</span>(GL_COLOR_BUFFER_BIT);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//开始画一个三角形</span></span><br><span class=\"line\">        <span class=\"built_in\">glBegin</span>(GL_TRIANGLES);</span><br><span class=\"line\">        <span class=\"built_in\">glColor3f</span>(<span class=\"number\">1</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>); <span class=\"comment\">//Red</span></span><br><span class=\"line\">        <span class=\"built_in\">glVertex3f</span>(<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">glColor3f</span>(<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>); <span class=\"comment\">//Green</span></span><br><span class=\"line\">        <span class=\"built_in\">glVertex3f</span>(<span class=\"number\">-1</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">glColor3f</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">1</span>); <span class=\"comment\">//Blue</span></span><br><span class=\"line\">        <span class=\"built_in\">glVertex3f</span>(<span class=\"number\">1</span>, <span class=\"number\">-1</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"comment\">//结束一个画图步骤</span></span><br><span class=\"line\">        <span class=\"built_in\">glEnd</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/******交换缓冲区，更新window上的内容******/</span></span><br><span class=\"line\">        <span class=\"built_in\">glfwSwapBuffers</span>(window);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">glfwTerminate</span>();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<img src=\"/images/计算机图形学/1/5.png\" style=\"zoom:50%;\"></li>\n</ol>\n","text":"$\\qquad$本篇文章将阐述在Mac os Monterey(12.2.1)的CLion(2021.3.3)上配置OpenGL的整体过程。虽然网上已有相关的文章，但有很多操作存在问题，可能是Mac系统变迁的原因，故作此文。 $\\qquad$原参考文章：Mac Clion Ope...","link":"","photos":[],"count_time":{"symbolsCount":"3.6k","symbolsTime":"3 mins."},"categories":[{"name":"血泪史","slug":"血泪史","count":2,"path":"api/categories/血泪史.json"}],"tags":[{"name":"OpenGL","slug":"OpenGL","count":4,"path":"api/tags/OpenGL.json"}],"toc":"","author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}},"mapped":true,"prev_post":{"title":"「Section 3」补码加减运算方法","uid":"916fffb6f0cf37494d0f7af19c9c80e4","slug":"补码加减运算方法","date":"2022-03-04T09:46:00.000Z","updated":"2022-03-14T12:23:06.655Z","comments":true,"path":"api/articles/补码加减运算方法.json","keywords":null,"cover":null,"text":"$\\qquad$目前计算机中的数据普遍是用补码存储的，因为补码具有简单的加减法规则，运算简单，易于实现，而且符号位可以和数值位一起参与运算。 $\\qquad\\quad$α. 补码规则运算 $\\qquad\\quad$β. 溢出检测 $\\qquad\\quad$γ. 机器数的移位运算 ...","link":"","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[{"name":"计算机组成原理","slug":"计算机组成原理","count":8,"path":"api/categories/计算机组成原理.json"}],"tags":[{"name":"notes","slug":"notes","count":13,"path":"api/tags/notes.json"}],"author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}}},"next_post":{"title":"「1012」The Best Rank","uid":"e26b5ce0cae66dfe27a555c57255d754","slug":"1012-The-Best-Rank","date":"2022-03-03T07:03:15.000Z","updated":"2022-12-02T07:28:37.856Z","comments":true,"path":"api/articles/1012-The-Best-Rank.json","keywords":null,"cover":null,"text":"➳ENTRY $\\qquad$To evaluate the performance of our first year CS majored students, we consider their grades of three courses only: C - C Prog...","link":"","photos":[],"count_time":{"symbolsCount":"4.7k","symbolsTime":"4 mins."},"categories":[{"name":"PAT（Advanced Level）Practice","slug":"PAT（Advanced-Level）Practice","count":153,"path":"api/categories/PAT（Advanced-Level）Practice.json"}],"tags":[{"name":"C＋＋","slug":"C＋＋","count":160,"path":"api/tags/C＋＋.json"},{"name":"map","slug":"map","count":25,"path":"api/tags/map.json"},{"name":"sort","slug":"sort","count":24,"path":"api/tags/sort.json"}],"author":{"name":"Starlit Rover","slug":"blog-author","avatar":"https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQWu4nWh5NV26rlAS5lR23iaundn5IVlV3EpYGNAdtnMObooQnk","link":"/","description":"Stroll in the starlit firmament~","socials":{"github":"https://github.com/StarlitRover","twitter":"https://twitter.com/Starlit_Rover","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"steam":{"icon":"/images/aurora/steam.svg","link":"https://steamcommunity.com/id/starlitrover/"}}}}}}