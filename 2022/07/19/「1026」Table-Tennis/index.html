
<!DOCTYPE html>
<html lang="zh ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starlit Rover || 「1026」Table Tennis</title>
    <meta name="author" content="Jammy Zeta">
    <meta name="description" content="Just stroll in the starlit firmament~ ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/star.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/night-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>加载过慢请开启缓存(浏览器默认开启)</p>
                    <div>
                        <img src="/Pikachu.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Starlit Rover</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Starlit Rover</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>「1026」Table Tennis </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/7/19
        </span>

        
        <span class="category">
            <a href="/categories/PAT（Advanced-Level）Practice">
                <span class="icon">
                    <a-icon type="book" theme="filled" />
                </span>
                PAT（Advanced Level）Practice
            </a>
        </span>
        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/C＋＋" style=color:#6484be>
                    C＋＋
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/vector" style=color:#016a99>
                    vector
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/min_element" style=color:#006674>
                    min_element
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <p><a target="_blank" rel="noopener" href="https://pintia.cn/problem-sets/994805342720868352/problems/994805472333250560">➳ENTRY</a></p>
<p>A table tennis club has N tables available to the public. The tables are numbered from 1 to N. For any pair of players, if there are some tables open when they arrive, they will be assigned to the available table with the smallest number. If all the tables are occupied, they will have to wait in a queue. It is assumed that every pair of players can play for at most 2 hours.</p>
<p>Your job is to count for everyone in queue their waiting time, and for each table the number of players it has served for the day.</p>
<p>One thing that makes this procedure a bit complicated is that the club reserves some tables for their VIP members. When a VIP table is open, the first VIP pair in the queue will have the privilege to take it. However, if there is no VIP in the queue, the next pair of players can take it. On the other hand, if when it is the turn of a VIP pair, yet no VIP table is available, they can be assigned as any ordinary players.</p>
<span id="more"></span>

<h3><span id="input-specification">Input Specification:</span></h3><p>Each input file contains one test case. For each case, the first line contains an integer <code>N</code> (≤10000) - the total number of pairs of players. Then <code>N</code> lines follow, each contains 2 times and a VIP tag: <code>HH:MM:SS</code> - the arriving time, <code>P</code> - the playing time in minutes of a pair of players, and <code>tag</code> - which is 1 if they hold a VIP card, or 0 if not. It is guaranteed that the arriving time is between 08:00:00 and 21:00:00 while the club is open. It is assumed that no two customers arrives at the same time. Following the players’ info, there are 2 positive integers: <code>K</code> (≤100) - the number of tables, and <code>M</code> (&lt; K) - the number of VIP tables. The last line contains <code>M</code> table numbers.</p>
<h3><span id="output-specification">Output Specification:</span></h3><p>For each test case, first print the arriving time, serving time and the waiting time for each pair of players in the format shown by the sample. Then print in a line the number of players served by each table. Notice that the output must be listed in chronological order of the serving time. The waiting time must be rounded up to an integer minute(s). If one cannot get a table before the closing time, their information must NOT be printed.</p>
<h3><span id="sample-input">Sample Input:</span></h3><pre><code class="in">10
20:52:00 10 0
08:00:00 20 0
08:02:00 30 0
20:51:00 10 0
08:10:00 30 0
08:12:00 10 1
20:40:00 13 0
08:01:30 15 1
20:53:00 10 1
20:54:00 10 0
3 1
2
</code></pre>
<h3><span id="sample-output">Sample Output:</span></h3><pre><code class="out">08:00:00 08:00:00 0
08:01:30 08:01:30 0
08:02:00 08:02:00 0
08:12:00 08:16:30 5
08:10:00 08:20:00 10
20:40:00 20:40:00 0
20:51:00 20:51:00 0
20:52:00 20:52:00 0
20:53:00 20:53:00 0
4 3 2
</code></pre>
<hr>
<h2><span id="ω">Ω</span></h2><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>麻了，这题目又让我觉得自己是个复健病人，踩坑达人是我没错了，脑子像被包子塞住了一样。。。</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>不耐烦的极简翻译，一家乒乓球馆里面有好几张球桌，每一对玩家到达时会自动选择编号最小的空闲球桌，没有空闲球桌时只能排队等候，你以为这就结束了吗？哈哈我们还有VIP机制，没想到吧，有几张球桌被指定为VIP球桌，当这些球桌空闲时队伍中的VIP用户可省去枯燥无味的排队直接开打（咳咳，当然普通用户在用VIP球桌时不能把人家赶走）。当然在没有VIP用户时可以提供给普通用户，VIP用户在没有VIP球桌时也可以用普通球桌。一对玩家最长只能玩2h，怎么样，心动了吗，赶紧拨打VIP热线（打住</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>烦躁的夏日，鸡血的蝉鸣，长的跟催眠符一样的题目，看到最后一句已经忘了前面的条件，又不是一个善茬。条件多了，理清情况就需要一点时间。我们可以码球桌，给每个球桌设置一条时间线，考虑最先空闲下来的球桌：如果是一张VIP球桌，我们就必须瞅瞅队伍里有没有VIP，没有就可以把它当普通球桌处理；对于普通球桌，则直接分配给队伍中的第一对玩家。第一个坑点已悄然出现，对于VIP用户会优先选择编号最小的VIP球桌（还挺有优越感哈）。因此在分配球桌时，如果是VIP用户，我们需要瞅瞅有没有空的VIP球桌。</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>这种地雷题，真就摸黑踩雷，我梳理了以下几个雷点：</p>
<ol>
<li><p>输入最后一行中的M个数是VIP球桌编号，一开始看了半天</p>
</li>
<li><p>VIP用户优先选择编号最小的VIP球桌，即使有编号更小的普通球桌</p>
</li>
<li><p>21:00来玩的玩家不提供服务（不能输出）</p>
</li>
<li><p>一对玩家最多只能玩两小时，超过两小时按两小时算</p>
</li>
<li><p>如果玩家来的时候很多球桌都是空闲的，此时不能分配最早空闲的球桌（对该玩家来说没有意义），而是需要把这些球桌的时间线都拉到玩家到达的时间</p>
</li>
<li><p>按照提供服务的时间顺序输出用户记录（VIP可以晚到早玩）</p>
</li>
<li><p>最后的等待时间需要按分钟四舍五入（≥ 30s 入，&lt; 30s 舍）</p>
</li>
</ol>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>如果上述雷都心知肚明，秒这玩意轻轻松松吧～</p>
<hr>
<h2><span id="c-d-e">C ☺ D E</span></h2><pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;

using namespace std;

class customer
{
public:
    bool isVIP = false, isAssigned = false;
    int arrival;
    int playing;
    int serving;
};

inline void printRecord(customer &amp;c)
{
    int a = c.arrival, s = c.serving, w = s - a;
    printf("%02d:%02d:%02d ", a / 3600, (a % 3600) / 60, a % 60);
    printf("%02d:%02d:%02d ", s / 3600, (s % 3600) / 60, s % 60);
    // 四舍五入
    printf("%d\n", w / 60 + ((w % 60 &lt; 30) ? 0 : 1));
}

int main()
{
    int n, h, m, s;
    cin &gt;&gt; n;
    vector&lt;customer&gt; cus(n);
    for (int i = 0; i &lt; n; ++i)
    {
        scanf("%d:%d:%d", &amp;h, &amp;m, &amp;s);
        cus[i].arrival = h * 3600 + m * 60 + s;
        cin &gt;&gt; cus[i].playing &gt;&gt; cus[i].isVIP;
        // playing time &lt;= 2h
        cus[i].playing = (cus[i].playing &gt; 120) ? 7200 : cus[i].playing * 60;
    }
    // 需要先按到达时间进行排序
    sort(cus.begin(), cus.end(), [](customer &amp;a, customer &amp;b) { return a.arrival &lt; b.arrival; });
    int table, vip, v;
    cin &gt;&gt; table &gt;&gt; vip;
    vector&lt;int&gt; time(table, 28800), total(table, 0), list;
    vector&lt;bool&gt; isVIP(table, false);
    for (int i = 0; i &lt; vip; ++i)
    {
        cin &gt;&gt; v;
        isVIP[v - 1] = true;
    }
    for (int i = 0; i &lt; n; ++i)
    {
        if (cus[i].isAssigned) continue;
        // 将时间线都拉到玩家到达的时间
        for (int j = 0; j &lt; table; ++j)
            if (time[j] &lt; cus[i].arrival)
                time[j] = cus[i].arrival;
        auto crt = min_element(time.begin(), time.end());
        //【&gt;=】21：00不提供服务
        if (*crt &gt;= 21 * 3600) break;
        // VIP球桌需查找【之前】最早到达的VIP用户
        if (isVIP[crt - time.begin()])
        {
            int j = i;
            bool flag = false;
            // j &lt; n !!!
            while (j &lt; n &amp;&amp; cus[j].arrival &lt;= *crt)
            {
                if (cus[j].isVIP &amp;&amp; !cus[j].isAssigned)
                {
                    cus[j].serving = *crt;
                    *crt += cus[j].playing;
                    cus[j].isAssigned = flag = true;
                    list.push_back(j);
                    total[crt - time.begin()] += 1;
                    // 别忘当前普通玩家还在排队！
                    i -= 1;
                    break;
                }
                ++j;
            }
            if (flag) continue;
        }
        // VIP用户优先选择VIP球桌
        if (cus[i].isVIP)
            for (int k = 0; k &lt; table; ++k)
                if (time[k] == *crt &amp;&amp; isVIP[k])
                {
                    crt = time.begin() + k;
                    break;
                }
        cus[i].serving = *crt;
        *crt += cus[i].playing;
        total[crt - time.begin()] += 1;
        cus[i].isAssigned = true;
        list.push_back(i);
    }
    for (auto &amp;k: list)
        printRecord(cus[k]);
    cout &lt;&lt; total[0];
    for (int i = 1; i &lt; table; ++i)
        cout &lt;&lt; " " &lt;&lt; total[i];
}
</code></pre>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            © 2022 - 2022 Starlit Rover
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Jammy Zeta
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: 'f1d02ea5b1fd5309c4b9',
        clientSecret: 'fea96546fcd9dc7495659e8c9d6c20cd75fa7dbe',
        repo: 'Blog-Comments',      // The repository of store comments,
        owner: 'StarlitRover',
        admin: ['StarlitRover'],
        language: 'zh-CN',
        id: md5(location.pathname),     // (Ensure uniqueness and length less than 50)
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>