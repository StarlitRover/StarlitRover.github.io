
<!DOCTYPE html>
<html lang="zh ">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starlit Rover || ã€Œ1151ã€LCA in a Binary Tree</title>
    <meta name="author" content="Jammy Zeta">
    <meta name="description" content="Just stroll in the starlit firmament~ ">
    <meta name="keywords" content=" ">
    <link rel="icon" href="/images/star.jpg">
    <link rel="stylesheet" href="/css/antd.min.css">
    
    <link rel="stylesheet" href="/css/night-theme.css">
    
    <script src="/js/vue.js"></script>
    <script src="/js/antd.min.js"></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body>

    <div id="loading"
        style="height: 100vh; width: 100%; position: fixed;display: flex;z-index: 200; justify-content: space-between;">
        <div id="loadleft" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div id="loadright" style="width: 50%;background-color: #ffffff;transition: width 0.6s ease-out;"></div>
        <div
            style="position: fixed; height: 100vh; width: 100%;display: flex;justify-content: center;align-items: center;">
            <div id="loadcontent"
                style="width:400px;height:400px;padding:50px;border-radius:50%;display:flex;justify-content:center;align-items:center;border:solid 10px#a3ddfb; text-align:center;opacity:1;transition:opacity 0.3s ease-out;">
                <div>
                    <h2>LOADING...</h2>
                    <p>åŠ è½½è¿‡æ…¢è¯·å¼€å¯ç¼“å­˜(æµè§ˆå™¨é»˜è®¤å¼€å¯)</p>
                    <div>
                        <img src="/Pikachu.gif" alt="loading">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="layout">
        <transition name="into">
            <div v-show="show_page" style="display: none;">
                <div id="menu_show">
                     
<nav id="menu">
    <div class="desktop-menu">
        <a href="/">
            <span class="title">Starlit Rover</span>
        </a>
        
        <a href="/">
            <span>
                <a-icon type="home" theme="filled" />
            </span>
            <span>home</span>
        </a>
        
        <a href="/archives">
            <span>
                <a-icon type="folder" theme="filled" />
            </span>
            <span>archives</span>
        </a>
        
        <a href="/categories">
            <span>
                <a-icon type="book" theme="filled" />
            </span>
            <span>categories</span>
        </a>
        
        <a href="/tags">
            <span>
                <a-icon type="tags" theme="filled" />
            </span>
            <span>tags</span>
        </a>
        
    </div>

    <div :class="'phone-menu ' + menu_show" id="phone-menu">
        <div :class="'title'" @click="menu_show=!menu_show">
            <span style="margin-right: 10px;">
                <a-icon type="appstore" theme="filled" />
            </span>
            <span>Starlit Rover</span>
        </div>
        <div class="items" v-show="menu_show">
            
            <a href="/">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="home" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">home</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="folder" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="book" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width:20px; max-width:50px; width: 10%">
                        <a-icon type="tags" theme="filled" />
                    </div>
                    <div style="min-width:100px;max-width: 150%;width: 20%;">tags</div>
                </div>
            </a>
            
        </div>
        <div class="curtain" v-show="menu_show"></div>
    </div>

</nav>
                </div>

                <div id="main">
                     
<link rel="stylesheet" href="/css/post-body.css">
<div class="article">
    <div>
        <h1>ã€Œ1151ã€LCA in a Binary Tree </h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <a-icon type="calendar" theme="filled" />
            </span>
            2022/11/28
        </span>

        
        <span class="category">
            <a href="/categories/PATï¼ˆAdvanced-Levelï¼‰Practice">
                <span class="icon">
                    <a-icon type="book" theme="filled" />
                </span>
                PATï¼ˆAdvanced Levelï¼‰Practice
            </a>
        </span>
        

        

        <span class="tags">
            <span class="icon">
                <a-icon type="tags" theme="filled" />
            </span>
            
            <span class="tag">
                
                <a href="/tags/Cï¼‹ï¼‹" style=color:#006674>
                    Cï¼‹ï¼‹
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/traversal-order" style=color:#006674>
                    traversal order
                </a>
            </span>
            
            <span class="tag">
                
                <a href="/tags/Tree" style=color:#006674>
                    Tree
                </a>
            </span>
            
        </span>
        
    </div>

    <div class="content" v-pre>
        <p>The lowest common ancestor (LCA) of two nodes U and V in a tree is the deepest node that has both U and V as descendants.</p>
<p>Given any two nodes in a binary tree, you are supposed to find their LCA.</p>
<span id="more"></span>

<!--more-->

<h3><span id="input-specification">Input Specification:</span></h3><p>Each input file contains one test case. For each case, the first line gives two positive integers: M (â‰¤Â 1,000), the number of pairs of nodes to be tested; and N (â‰¤Â 10,000), the number of keys in the binary tree, respectively. In each of the following two lines, N distinct integers are given as the inorder and preorder traversal sequences of the binary tree, respectively. It is guaranteed that the binary tree can be uniquely determined by the input sequences. Then M lines follow, each contains a pair of integer keys U and V. All the keys are in the range ofÂ <strong>int</strong>.</p>
<h3><span id="output-specification">Output Specification:</span></h3><p>For each given pair of U and V, print in a lineÂ <code>LCA of U and V is A.</code>Â if the LCA is found andÂ <code>A</code>Â is the key. But ifÂ <code>A</code>Â is one of U and V, printÂ <code>X is an ancestor of Y.</code>Â whereÂ <code>X</code>Â isÂ <code>A</code>Â andÂ <code>Y</code>Â is the other node. If U or V is not found in the binary tree, print in a lineÂ <code>ERROR: U is not found.</code>Â orÂ <code>ERROR: V is not found.</code>Â orÂ <code>ERROR: U and V are not found.</code>.</p>
<h3><span id="sample-input">Sample Input:</span></h3><pre><code class="in">6 8
7 2 3 4 6 5 1 8
5 3 7 2 6 4 8 1
2 6
8 1
7 9
12 -3
0 8
99 99
</code></pre>
<h3><span id="sample-output">Sample Output:</span></h3><pre><code class="out">LCA of 2 and 6 is 3.
8 is an ancestor of 1.
ERROR: 9 is not found.
ERROR: 12 and -3 are not found.
ERROR: 0 is not found.
ERROR: 99 and 99 are not found.
</code></pre>
<hr>
<h2><span id="Ï‰">Î©</span></h2><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>å¥½çœ¼ç†Ÿçš„é¢˜ç›®å•Šï¼Œæ„Ÿè§‰è¿æµ‹è¯•æ ·ä¾‹ç”šè‡³éƒ½æ˜¯ä¸€æ ·çš„â€”â€”<a href="/2022/11/27/%E3%80%8E1143%E3%80%8FLowest-Common-Ancestor/" title="ã€1143ã€Lowest Common Ancestor">ã€1143ã€Lowest Common Ancestor</a>ã€‚åŒæ ·æ˜¯è¾“å‡ºä¸¤ä¸ªèŠ‚ç‚¹å…±åŒçš„æœ€ä½ç¥–å®—èŠ‚ç‚¹ï¼Œä¸Šä¸€é—®ä¸­æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œè€Œè¿™ä¸€é—®åªæ˜¯äºŒå‰æ ‘ï¼Œä½†ç»™å‡ºäº†ä¸­åºéå†å’Œå…ˆåºéå†ã€‚</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>çœŸæ˜¯æ¢æ±¤ä¸æ¢è¯å•Šï¼Œæˆ‘å¯»æ€ç€ä¸Šä¸€é—®ä¹‹æ‰€ä»¥å¯ä»¥æŠŠä¸­åºéå†çœå»æ˜¯å› ä¸ºæ‰€æœ‰èŠ‚ç‚¹çš„å‡åºæ’åˆ—å°±æ˜¯äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ã€‚æ‰€ä»¥ä¸¤è€…æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªè¦ç»™æ¯ä¸€ä¸ªèŠ‚ç‚¹é‡æ–°ç¼–å·ä½¿å¾—å®ƒä»¬çš„ä¸­åºéå†ç»“æœå³ä¸ºå‡åºæ’åˆ—ï¼Œé€šè¿‡mapå»ºç«‹èµ·è€ç¼–å·å’Œæ–°ç¼–å·ä¹‹é—´çš„æ˜ å°„ã€‚é‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„æ–°ç¼–å·è®¾ç½®ä¸ºä¸­åºéå†ä¸­çš„ç´¢å¼•å³å¯ã€‚æ¥ä¸‹æ¥å°±åœ¨å…ˆåºéå†ä¸­æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ–°ç¼–å·ä»‹äºä¸¤ä¸ªèŠ‚ç‚¹æ–°ç¼–å·ä¹‹é—´çš„èŠ‚ç‚¹å³å¯ï¼Œè¯æ˜è¿‡ç¨‹è§1143ã€‚</p>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container>å…¶å®æ ¹æ®æ¨å¯¼è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹å‡ºä¸€èˆ¬çš„æ ‘ï¼ˆéäºŒå‰æ ‘ï¼‰ä¹Ÿé€‚ç”¨è¿™ç§åšæ³•ã€‚</p>
<hr>
<h2><span id>ğŸ</span></h2><pre><code class="cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;map&gt;

using namespace std;

int main()
{
    int m, n, k, a, b, u, v, ans;
    scanf("%d %d", &amp;m, &amp;n);
    vector&lt;int&gt; pre(n);
    map&lt;int, int&gt; in;
    for (int i = 0; i &lt; n; ++i)
        scanf("%d", &amp;k), in[k] = i;
    for (auto &amp;p: pre) cin &gt;&gt; p;
    for (int i = 0; i &lt; m; ++i)
    {
        scanf("%d %d", &amp;a, &amp;b);
        bool fa = in.find(a) == in.end(), fb = in.find(b) == in.end();
        switch (fa + (fb &lt;&lt; 1))
        {
            case 1:
                printf("ERROR: %d is not found.\n", a); continue;
            case 2:
                printf("ERROR: %d is not found.\n", b); continue;
            case 3:
                printf("ERROR: %d and %d are not found.\n", a, b); continue;
        }
        u = min(in[a], in[b]), v = max(in[a], in[b]);
        for (auto &amp;p: pre)
            if (in[p] &gt;= u &amp;&amp; in[p] &lt;= v)
            {
                ans = p;
                break;
            }
        if (in[ans] == v || in[ans] == u)
            printf("%d is an ancestor of %d.\n", in[ans] == in[a] ? a : b, in[ans] == in[a] ? b : a);
        else
            printf("LCA of %d and %d is %d.\n", a, b, ans);
    }
}
</code></pre>
<p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0" xmlns="http://www.w3.org/2000/svg" width="4.525ex" height="0.036ex" role="img" focusable="false" viewbox="0 0 2000 16"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mstyle"><g data-mml-node="mspace"/></g></g></g></svg></mjx-container></p>

    </div>

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <div id="comment">
        <div id="gitalk-container">
        </div>
    </div>
    
</div>
                     
<footer id="footer">
    <div class="footer-wrap">
        <div>
            Â© 2022 - 2022 Starlit Rover
            <span class="footer-icon">
                <a-icon type="flag" theme="filled" /></span>
            @Jammy Zeta
        </div>
        <div></div>
        <div>Based on the <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo Engine</a> & <a
                target="_blank" rel="noopener" href="https://github.com/korilin/hexo-theme-particle">Particle Theme</a></div>
        
    </div>

</footer>

<script src="/js/highlight.min.js"></script>
<script src="/js/particle.js"></script>
                </div>
            </div>
        </transition>
    </div>

    <script>
    new Vue({
        el: "#layout",
        data: {
            show_page: false,
            onload_menu: false,
            menu_show: false,
            card_top: 100
        },
        created: function () {
            var that = this
            window.onload = function () {
                that.show_page = true
                document.getElementById("loadcontent").style.opacity = 0
                setTimeout(function () {
                    document.getElementById("loadleft").style.width = 0
                    document.getElementById("loadright").style.width = 0
                }, 300)
                setTimeout(function () {
                    document.getElementById("loading").style = "display:none"
                }, 600)
            }
        },
        mounted: function () {
            var that = this
            window.addEventListener('scroll', function (e) {
                that.menu_show = false
            })
        },
        methods: {
            home_click: function () {
                window.scrollTo({
                    top: window.innerHeight - 80,
                    behavior: "smooth",
                });
            }
        }
    })
</script>

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: 'f1d02ea5b1fd5309c4b9',
        clientSecret: 'fea96546fcd9dc7495659e8c9d6c20cd75fa7dbe',
        repo: 'Blog-Comments',      // The repository of store comments,
        owner: 'StarlitRover',
        admin: ['StarlitRover'],
        language: 'zh-CN',
        id: md5(location.pathname),     // (Ensure uniqueness and length less than 50)
        distractionFreeMode: true  // Facebook-like distraction free mode
    })
    gitalk.render('gitalk-container')
</script>

</body>

</html>